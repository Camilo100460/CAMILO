let horoscopos = {
    "Capricornio": [
        "Hoy ser치 un gran d칤a para ti.",
        "Deber칤as evitar tomar decisiones importantes hoy.",
        "Capricornio, hoy te sentir치s lleno de determinaci칩n y enfoque, listo para enfrentar cualquier desaf칤o que se presente en tu camino. Aprovecha esta energ칤a para avanzar en tus metas profesionales y alcanzar nuevos logros. En el 치mbito personal, tu lealtad y dedicaci칩n fortalecer치n tus relaciones m치s importantes. Mant칠n un equilibrio saludable entre el trabajo y el tiempo para ti mismo, 춰y ver치s c칩mo alcanzas el 칠xito en todas las 치reas de tu vida!",
        "Hoy, Capricornio, te sentir치s inspirado y lleno de creatividad, listo para dar vida a tus ideas m치s audaces. Tu determinaci칩n y perseverancia te llevar치n a superar cualquier obst치culo que se interponga en tu camino. En el 치mbito financiero, tus decisiones prudentes te permitir치n construir una base s칩lida para tu futuro. Dedica tiempo a cuidar tu bienestar f칤sico y emocional, 춰y ver치s c칩mo cada d칤a se llena de nuevas oportunidades!",
        "Capricornio, hoy te espera un d칤a lleno de oportunidades para el crecimiento personal y profesional. Tu disciplina y tu 칠tica de trabajo te ayudar치n a alcanzar tus metas con facilidad. En el 치mbito personal, tus relaciones se fortalecer치n gracias a tu sinceridad y tu compromiso. Recuerda tomarte un tiempo para relajarte y recargar energ칤as, 춰y ver치s c칩mo todo se alinea a tu favor!",
        "Hoy, Capricornio, te sentir치s en armon칤a contigo mismo y con el mundo que te rodea. Tu determinaci칩n y tu capacidad para superar los desaf칤os te llevar치n hacia el 칠xito en todas tus empresas. En el 치mbito personal, tu lealtad y tu generosidad fortalecer치n tus lazos afectivos. Dedica tiempo a cuidar tu bienestar f칤sico y emocional, 춰y ver치s c칩mo cada d칤a te acerca m치s a tus sue침os m치s grandes!",
        "Capricornio, hoy podr칤as sentirte abrumado por la presi칩n de tus responsabilidades y compromisos. Es posible que te resulte dif칤cil mantener el equilibrio entre el trabajo y tu vida personal, lo que podr칤a generar tensiones en tus relaciones. En el 치mbito financiero, evita tomar decisiones apresuradas y aseg칰rate de pensar cuidadosamente antes de actuar. A pesar de los desaf칤os, recuerda que tienes la fuerza y la determinaci칩n para superar cualquier obst치culo que se interponga en tu camino.",
        "Hoy, Capricornio, podr칤as encontrarte luchando contra la sensaci칩n de estancamiento en tu vida. Es posible que te resulte dif칤cil encontrar la motivaci칩n para avanzar en tus metas, lo que podr칤a generar frustraci칩n y ansiedad. En el 치mbito personal, es importante que te comuniques abierta y honestamente con tus seres queridos para evitar malentendidos. Recuerda que cada desaf칤o es una oportunidad para crecer y aprender, 춰as칤 que mant칠n la fe en ti mismo y sigue adelante!",
        "Capricornio, hoy podr칤as sentirte agobiado por la sensaci칩n de estar atrapado en una rutina. Es posible que te resulte dif칤cil encontrar la inspiraci칩n para seguir adelante, lo que podr칤a afectar tu rendimiento en el trabajo y tus relaciones personales. En el 치mbito financiero, es crucial que evites tomar decisiones impulsivas y que te enfoques en mantener un equilibrio saludable en tus gastos. A pesar de los desaf칤os, recuerda que tienes la fuerza interior para superar cualquier obst치culo que se presente en tu camino.",
        "Hoy, Capricornio, podr칤as enfrentarte a obst치culos inesperados que pondr치n a prueba tu paciencia y tu determinaci칩n. Las tensiones en tus relaciones personales podr칤an aumentar, lo que podr칤a generar conflictos y malentendidos. En el 치mbito financiero, es importante que te mantengas firme en tus decisiones y que evites cualquier riesgo innecesario. Aunque te enfrentes a desaf칤os, recuerda que tienes la capacidad de encontrar soluciones creativas y superar cualquier adversidad que se presente en tu camino."
    ],
    "Acuario": ["Hoy encontrar치s algo que has estado buscando.", "Hoy es un buen d칤a para aprender algo nuevo."],
    "Piscis": ["Hoy te sentir치s inspirado para crear.", "Hoy es un buen d칤a para relajarte y disfrutar."],
    "Aries": ["Hoy es un buen d칤a para empezar un nuevo proyecto.", "Hoy es un buen d칤a para hacer ejercicio y cuidar tu salud."],
    "Tauro": ["Hoy es un buen d칤a para pasar tiempo con seres queridos.", "Hoy es un buen d칤a para cuidar de ti mismo y relajarte."],
    "Geminis": ["Hoy es un buen d칤a para aprender algo nuevo.", "Hoy es un buen d칤a para expresar tus sentimientos a alguien especial."],
    "Cancer": ["Hoy es un buen d칤a para hacer algo creativo.", "Hoy es un buen d칤a para cuidar de tu salud y bienestar."],
    "Leo": ["Hoy es un buen d칤a para enfrentar un desaf칤o.", "Hoy es un buen d칤a para pasar tiempo con amigos."],
    "Virgo": ["Hoy es un buen d칤a para organizar y planificar.", "Hoy es un buen d칤a para tomar un descanso y relajarte."],
    "Libra": [
        "Libra, hoy tu carisma ser치 contagioso, irradiando una energ칤a positiva que iluminar치 tu entorno. Aprovecha este d칤a para fortalecer tus lazos afectivos, compartiendo amor y alegr칤a con tus seres queridos. En el 치mbito financiero, tus decisiones sabias y estrat칠gicas te conducir치n hacia la prosperidad. Dedica tiempo a cuidar tu bienestar f칤sico y emocional, 춰y ver치s c칩mo florecen nuevas oportunidades en tu vida!",
        "Hoy, Libra, sentir치s una profunda armon칤a en tu ser, lo que te permitir치 manifestar tus deseos con facilidad. Tus relaciones personales se fortalecer치n con gestos de amor y comprensi칩n. En cuanto a tus finanzas, tu enfoque y determinaci칩n te llevar치n hacia el 칠xito econ칩mico. Conf칤a en tu intuici칩n y sigue tu coraz칩n en todas tus decisiones. 춰El universo conspira a tu favor para que alcances tus metas m치s ambiciosas!",
        "Libra, hoy te espera un d칤a lleno de oportunidades y momentos felices. Tu encanto natural atraer치 la atenci칩n de quienes te rodean, fortaleciendo tus relaciones interpersonales. En el 치mbito financiero, tus habilidades para gestionar tus recursos te permitir치n alcanzar la estabilidad y la seguridad econ칩mica. Recuerda cuidar tu bienestar f칤sico y emocional, 춰y ver치s c칩mo cada d칤a brilla con nuevas posibilidades!",
        "Hoy, Libra, podr칤as sentirte abrumado por la indecisi칩n y la incertidumbre en tu vida. Las tensiones en tus relaciones personales podr칤an alcanzar su punto m치ximo, generando conflictos y malentendidos. Es importante que te tomes un momento para reflexionar y encontrar la paz interior. En cuanto a tus finanzas, evita tomar decisiones impulsivas y s칠 prudente con tus gastos. Aunque el camino parezca dif칤cil, recuerda que cada desaf칤o te hace m치s fuerte.",
        "Libra, hoy podr칤as encontrarte luchando contra obst치culos que parecen insuperables. Las tensiones en tus relaciones personales podr칤an causar estr칠s y ansiedad, as칤 que trata de mantener la calma y la compostura. En el 치mbito financiero, es crucial que te mantengas firme en tus decisiones y evites cualquier riesgo innecesario. A pesar de los desaf칤os, recuerda que tienes la fuerza y la determinaci칩n para superar cualquier adversidad que se presente en tu camino.",
        "Libra, hoy te espera un d칤a lleno de armon칤a y equilibrio. Tu capacidad para encontrar soluciones pac칤ficas en situaciones conflictivas te permitir치 fortalecer tus relaciones interpersonales. En el 치mbito financiero, tu enfoque y disciplina te ayudar치n a alcanzar tus metas econ칩micas. Dedica tiempo a cuidar tu bienestar f칤sico y emocional, 춰y ver치s c칩mo todo fluye con facilidad en tu vida!",
        "Hoy, Libra, tu encanto natural estar치 en su punto m치s alto, atrayendo la atenci칩n y la admiraci칩n de quienes te rodean. Aprovecha este d칤a para expresar tu creatividad y tu pasi칩n en todo lo que hagas. En el 치mbito financiero, tus decisiones inteligentes te llevar치n hacia la prosperidad y el 칠xito. Conf칤a en tu intuici칩n y sigue tu coraz칩n en todas tus acciones. 춰El universo est치 conspirando a tu favor para que logres tus sue침os m치s grandes!",
        "Libra, hoy podr칤as sentirte desanimado por las tensiones en tus relaciones personales. Los conflictos y malentendidos podr칤an empa침ar tu d칤a, as칤 que trata de mantener la calma y la compostura. En el 치mbito financiero, es importante que evites tomar decisiones impulsivas y que te centres en mantener un equilibrio saludable en tus gastos. Aunque te enfrentes a desaf칤os, recuerda que cada obst치culo es una oportunidad para crecer y aprender.",
        "Hoy, Libra, podr칤as encontrarte luchando contra la sensaci칩n de estancamiento en tu vida. Es posible que te resulte dif칤cil encontrar la motivaci칩n para avanzar en tus metas, lo que podr칤a generar frustraci칩n y ansiedad. En el 치mbito personal, es importante que te comuniques abierta y honestamente con tus seres queridos para evitar malentendidos. Recuerda que cada desaf칤o es una oportunidad para crecer y aprender, 춰as칤 que mant칠n la fe en ti mismo y sigue adelante!",
        "Libra, hoy podr칤as sentirte agobiado por la sensaci칩n de estar atrapado en una rutina. Es posible que te resulte dif칤cil encontrar la inspiraci칩n para seguir adelante, lo que podr칤a afectar tu rendimiento en el trabajo y tus relaciones personales. En el 치mbito financiero, es crucial que evites tomar decisiones impulsivas y que te enfoques en mantener un equilibrio saludable en tus gastos. A pesar de los desaf칤os, recuerda que tienes la fuerza interior para superar cualquier obst치culo que se presente en tu camino.",
        "Hoy, Libra, podr칤as enfrentarte a obst치culos inesperados que pondr치n a prueba tu paciencia y tu determinaci칩n. Las tensiones en tus relaciones personales podr칤an aumentar, lo que podr칤a generar conflictos y malentendidos. En el 치mbito financiero, es importante que te mantengas firme en tus decisiones y que evites cualquier riesgo innecesario. Aunque te enfrentes a desaf칤os, recuerda que tienes la capacidad de encontrar soluciones creativas y superar cualquier adversidad que se presente en tu camino."
    ],
    "Scorpion": ["Hoy es un buen d칤a para enfrentar tus miedos.", "Hoy es un buen d칤a para compartir tus sentimientos con alguien cercano."],
    "Sagitario": ["Hoy es un buen d칤a para una aventura.", "Hoy es un buen d칤a para aprender algo nuevo."]
}
function agregarHoroscopo(signo, horoscopo) {
    horoscopos[signo].push(horoscopo);
}

function obtenerHoroscopo(signo) {
    let horoscoposSigno = horoscopos[signo];
    let indiceAleatorio = Math.floor(Math.random() * horoscoposSigno.length);
    return horoscoposSigno[indiceAleatorio];
}

let handler = (m, { command, text }) => {
    if (!text) throw `Ejemplo: ${command} 2003 02 25`

    const [year, month, day] = text.match(/\d+/g).map(Number)
    const date = new Date(year, month - 1, day)

    if (isNaN(date)) throw `Fecha inv치lida, por favor usa el siguiente formato: AAAA MM DD. Por ejemplo: ${command} 2003 02 25`

    const today = new Date()
    const currentYear = today.getFullYear()
    const currentMonth = today.getMonth() + 1
    const currentDay = today.getDate()

    const birth = [year, month, day]
    const horoscopo = obtenerHoroscopo(getZodiac(month, day))

    const ageD = new Date(today - date)
    const age = ageD.getFullYear() - new Date(1970, 0, 1).getFullYear()

    const isBirthday = month === currentMonth && day === currentDay
    const ageText = isBirthday ? `${age} - 춰Feliz cumplea침os! 游봅` : age

    const replyText = `
Fecha de nacimiento: ${birth.join('-')}
Edad: ${ageText}
Signo hor칩scopo: ${getZodiac(month, day)}
Hor칩scopo: ${horoscopo}
`.trim()

    m.reply(replyText)
}

handler.help = ['hor칩scopo <AAAA MM DD>']
handler.tags = ['tools']
handler.command = /^hor[o칩]scopo$/i

const zodiak = [
    ["Capricornio", new Date(1970, 0, 1)],
    ["Acuario", new Date(1970, 0, 20)],
    ["Piscis", new Date(1970, 1, 19)],
    ["Aries", new Date(1970, 2, 21)],
    ["Tauro", new Date(1970, 3, 21)],
    ["Geminis", new Date(1970, 4, 21)],
    ["Cancer", new Date(1970, 5, 22)],
    ["Leo", new Date(1970, 6, 23)],
    ["Virgo", new Date(1970, 7, 23)],
    ["Libra", new Date(1970, 8, 23)],
    ["Scorpion", new Date(1970, 9, 23)],
    ["Sagitario", new Date(1970, 10, 22)],
    ["Capricornio", new Date(1970, 11, 22)]
].reverse()

function getZodiac(month, day) {
    let d = new Date(1970, month - 1, day)
    return zodiak.find(([_, _d]) => d >= _d)[0]
}

export default handler
